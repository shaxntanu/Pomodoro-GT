<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pomodoro Focus Timer</title>
    <link href="https://fonts.googleapis.com/css2?family=VT323&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            user-select: none;
        }

        body {
            background-color: #000000;
            min-height: 100vh;
            position: relative;
            font-family: 'VT323', monospace;
            color: #ffffff;
            overflow-x: hidden;
            overflow-y: scroll;
            scrollbar-width: none;
            -ms-overflow-style: none;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: clamp(10px, 2vw, 20px);
        }

        body::-webkit-scrollbar {
            display: none;
        }

        .pixel {
            position: absolute;
            width: 3px;
            height: 3px;
            background: white;
            opacity: 0.15;
            z-index: 1;
            border-radius: 50%;
            animation: twinkle 3s infinite alternate;
            pointer-events: none;
        }

        @keyframes twinkle {
            from {
                opacity: 0.05;
                transform: scale(1);
            }

            to {
                opacity: 0.25;
                transform: scale(1.5);
            }
        }

        .container {
            z-index: 10;
            position: relative;
            text-align: center;
            max-width: 1200px;
            width: 100%;
            animation: fadeInUp 1s ease-out;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .main-title {
            font-size: clamp(2rem, 8vw, 4rem);
            color: #ffffff;
            margin-bottom: clamp(0.5rem, 1vw, 1rem);
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            letter-spacing: clamp(1px, 0.5vw, 2px);
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
        }

        .quote-container {
            min-height: clamp(40px, 8vw, 60px);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: clamp(1rem, 2vw, 1.5rem);
            width: 100%;
            max-width: 800px;
        }

        .stoic-quote {
            font-size: clamp(0.97rem, 2.69vw, 1.4rem);
            color: #888888;
            font-style: italic;
            animation: fadeInQuote 1.5s ease-in-out;
            text-align: center;
            padding: 0 clamp(1rem, 3vw, 2rem);
            line-height: 1.4;
        }

        @keyframes fadeInQuote {
            0% {
                opacity: 0;
                transform: translateY(-10px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .timer-container {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid #333;
            border-radius: clamp(10px, 2vw, 20px);
            padding: clamp(1.5rem, 4vw, 3rem);
            margin: clamp(1rem, 2vw, 2rem) auto;
            backdrop-filter: blur(8px);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            width: 100%;
            max-width: min(90vw, 800px);
        }

        .progress-ring {
            width: clamp(200px, 50vw, 300px);
            height: clamp(200px, 50vw, 300px);
            margin: 0 auto clamp(1rem, 2vw, 2rem);
            position: relative;
            border-radius: 50%;
            background: conic-gradient(#ffffff 0deg, #333333 0deg);
            flex-shrink: 0;
            aspect-ratio: 1 / 1;
        }

        .progress-ring::before {
            content: '';
            position: absolute;
            top: 8px;
            left: 8px;
            right: 8px;
            bottom: 8px;
            background: #000000;
            border-radius: 50%;
            z-index: 1;
        }

        .session-counter-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #888888;
            z-index: 20;
            pointer-events: none;
            font-weight: bold;
            text-align: center;
        }

        .session-label {
            font-size: clamp(0.9rem, 2.5vw, 1.2rem);
            margin-bottom: 0.2rem;
        }

        .session-fraction {
            font-size: clamp(1.2rem, 4vw, 2rem);
        }

        .timer-display {
            font-size: clamp(3rem, 15vw, 8rem);
            color: #ffffff;
            margin-bottom: clamp(0.5rem, 1vw, 1rem);
            text-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .countdown-display {
            font-size: clamp(5rem, 20vw, 12rem);
            color: #ffffff;
            text-shadow: 0 0 40px rgba(255, 255, 255, 0.8);
            font-weight: bold;
            animation: countdownPulse 1s ease-in-out;
        }

        @keyframes countdownPulse {
            0% {
                transform: scale(0.8);
                opacity: 0;
            }

            50% {
                transform: scale(1.2);
            }

            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .timer-fade-in {
            animation: timerFadeIn 0.5s ease-out;
        }

        @keyframes timerFadeIn {
            0% {
                opacity: 0;
                transform: scale(0.9);
            }

            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .session-status {
            color: #888888;
            font-size: clamp(1rem, 3.5vw, 1.8rem);
            margin-bottom: clamp(1rem, 2vw, 2rem);
        }

        .session-status.focus-glow.running {
            color: #ffffff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            animation: focusGlow 2s ease-in-out infinite;
        }

        .session-status.break-glow.running {
            color: #ffffff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            animation: breakGlow 2s ease-in-out infinite;
        }

        @keyframes focusGlow {

            0%,
            100% {
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
            }

            50% {
                text-shadow: 0 0 30px rgba(255, 255, 255, 1), 0 0 40px rgba(255, 255, 255, 0.8);
            }
        }

        @keyframes breakGlow {

            0%,
            100% {
                text-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
            }

            50% {
                text-shadow: 0 0 30px rgba(255, 255, 255, 1), 0 0 40px rgba(255, 255, 255, 0.8);
            }
        }

        .controls {
            display: flex;
            gap: clamp(0.5rem, 1.5vw, 1rem);
            margin: clamp(1rem, 2vw, 2rem) 0;
            flex-wrap: wrap;
            justify-content: center;
            width: 100%;
        }

        .control-btn {
            font-family: 'VT323', monospace;
            font-size: clamp(0.9rem, 2.5vw, 1.3rem);
            background: transparent;
            border: 2px solid #888888;
            color: #888888;
            padding: clamp(0.7rem, 2vw, 1rem) clamp(1rem, 3vw, 2rem);
            cursor: pointer;
            border-radius: clamp(5px, 1vw, 10px);
            transition: all 0.4s ease;
            min-width: clamp(90px, 20vw, 120px);
            flex: 1 1 auto;
            max-width: 150px;
        }

        .control-btn:hover {
            border-color: #ffffff;
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3);
        }

        .control-btn.active {
            background: rgba(255, 255, 255, 0.2);
            border-color: #ffffff;
            color: #ffffff;
            animation: buttonGlow 2s ease-in-out infinite;
        }

        .control-btn.panel-active {
            border-color: #ffffff;
            color: #ffffff;
            background: rgba(255, 255, 255, 0.15);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.5), inset 0 0 20px rgba(255, 255, 255, 0.1);
            animation: buttonGlow 2s ease-in-out infinite;
        }

        @keyframes buttonGlow {

            0%,
            100% {
                box-shadow: 0 0 15px rgba(255, 255, 255, 0.4), inset 0 0 15px rgba(255, 255, 255, 0.1);
            }

            50% {
                box-shadow: 0 0 25px rgba(255, 255, 255, 0.7), inset 0 0 25px rgba(255, 255, 255, 0.2);
            }
        }

        .fullscreen-btn {
            position: fixed;
            top: clamp(10px, 2vw, 20px);
            right: clamp(10px, 2vw, 20px);
            font-family: Arial, sans-serif;
            font-size: clamp(1.2rem, 3vw, 1.8rem);
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #555;
            color: #888888;
            padding: 0;
            cursor: pointer;
            border-radius: clamp(5px, 1vw, 8px);
            z-index: 1000;
            width: clamp(40px, 8vw, 50px);
            height: clamp(40px, 8vw, 50px);
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .fullscreen-btn:hover {
            border-color: #ffffff;
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
            transform: scale(1.1);
        }

        .panels-container {
            display: none;
            gap: clamp(1rem, 2vw, 2rem);
            margin: clamp(1rem, 2vw, 2rem) auto 0 auto;
            max-width: 1200px;
            width: 100%;
            position: relative;
            overflow: hidden;
            flex-direction: row;
        }

        .panels-container.active {
            display: flex;
        }

        .settings-panel {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: clamp(10px, 2vw, 20px);
            backdrop-filter: blur(8px);
            padding: clamp(1.5rem, 4vw, 3rem);
            overflow-y: auto;
            max-height: 600px;
            width: 0;
            opacity: 0;
            transform: translateX(-100%);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            flex-shrink: 0;
            position: relative;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .settings-panel::-webkit-scrollbar {
            display: none;
        }

        .settings-panel.open {
            width: calc(50% - clamp(0.5rem, 1vw, 1rem));
            opacity: 1;
            transform: translateX(0);
        }

        .task-panel {
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: clamp(10px, 2vw, 20px);
            backdrop-filter: blur(8px);
            padding: clamp(1.5rem, 4vw, 3rem);
            overflow-y: auto;
            max-height: 600px;
            width: 0;
            opacity: 0;
            transform: translateX(100%);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
            margin-left: auto;
            flex-shrink: 0;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .task-panel::-webkit-scrollbar {
            display: none;
        }

        .task-panel.open {
            width: calc(50% - clamp(0.5rem, 1vw, 1rem));
            opacity: 1;
            transform: translateX(0);
        }

        .settings-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: clamp(1rem, 2vw, 1.5rem);
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .save-settings-btn {
            font-family: 'VT323', monospace;
            font-size: clamp(0.9rem, 2vw, 1rem);
            background: transparent;
            border: 2px solid #888888;
            color: #888888;
            cursor: pointer;
            border-radius: clamp(5px, 1vw, 8px);
            padding: clamp(0.5rem, 1.5vw, 0.7rem) clamp(1rem, 2.5vw, 1.5rem);
            transition: all 0.3s ease;
            display: none;
            min-width: clamp(70px, 15vw, 90px);
        }

        .save-settings-btn.show {
            display: inline-block;
            animation: fadeInScale 0.4s ease-out;
        }

        .save-settings-btn:hover {
            border-color: #ffffff;
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 255, 255, 0.3);
        }

        @keyframes fadeInScale {
            from {
                opacity: 0;
                transform: scale(0.8);
            }

            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .timer-warning {
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid #ff6b6b;
            border-radius: clamp(5px, 1vw, 8px);
            padding: clamp(0.7rem, 1.5vw, 1rem);
            margin-bottom: clamp(0.7rem, 1.5vw, 1rem);
            color: #ff6b6b;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            text-align: center;
            display: none;
            animation: pulseWarning 2s infinite;
        }

        .timer-warning.show {
            display: block;
        }

        @keyframes pulseWarning {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.7;
            }
        }

        .confirmation-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            color: #ffffff;
            padding: clamp(1.5rem, 3vw, 2rem);
            border-radius: clamp(10px, 2vw, 15px);
            z-index: 2000;
            display: none;
            text-align: center;
            backdrop-filter: blur(15px);
            border: 2px solid #333;
            max-width: 90vw;
            width: 400px;
        }

        .confirmation-dialog.show {
            display: block;
        }

        .dialog-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            z-index: 1999;
            display: none;
        }

        .dialog-backdrop.show {
            display: block;
        }

        .dialog-title {
            font-size: clamp(1.2rem, 3vw, 1.5rem);
            margin-bottom: clamp(0.7rem, 1.5vw, 1rem);
            color: #ffffff;
        }

        .dialog-message {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            margin-bottom: clamp(1.5rem, 3vw, 2rem);
            color: #cccccc;
            line-height: 1.4;
        }

        .dialog-buttons {
            display: flex;
            gap: clamp(0.5rem, 1.5vw, 1rem);
            justify-content: center;
            flex-wrap: wrap;
        }

        .dialog-btn {
            font-family: 'VT323', monospace;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            padding: clamp(0.6rem, 1.5vw, 0.8rem) clamp(1rem, 3vw, 2rem);
            border: 2px solid #888888;
            border-radius: clamp(5px, 1vw, 8px);
            cursor: pointer;
            flex: 1 1 auto;
            min-width: 100px;
        }

        .dialog-btn.confirm {
            background: #888888;
            color: #000000;
        }

        .dialog-btn.cancel {
            background: transparent;
            color: #888888;
        }

        .settings-group {
            margin-bottom: clamp(1rem, 2vw, 2rem);
        }

        .settings-group h3,
        .task-panel h3 {
            color: #ffffff;
            margin-bottom: clamp(1rem, 2vw, 1.5rem);
            font-size: clamp(1.2rem, 3vw, 2rem);
            text-align: center;
            letter-spacing: 1px;
        }

        .setting-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: clamp(0.7rem, 1.5vw, 1rem);
            padding: clamp(0.3rem, 1vw, 0.5rem) 0;
            color: #888888;
            font-size: clamp(0.9rem, 2vw, 1rem);
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .setting-input {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: clamp(3px, 0.5vw, 5px);
            padding: clamp(0.3rem, 1vw, 0.5rem);
            color: white;
            font-family: 'VT323', monospace;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            width: clamp(60px, 15vw, 80px);
        }

        .volume-container {
            display: flex;
            align-items: center;
            gap: clamp(0.5rem, 1vw, 0.8rem);
        }

        .volume-slider {
            width: clamp(80px, 20vw, 120px);
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            cursor: pointer;
            -webkit-appearance: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: clamp(16px, 3vw, 20px);
            height: clamp(16px, 3vw, 20px);
            background: #ffffff;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid #888888;
        }

        .volume-value {
            color: #ffffff;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            min-width: clamp(25px, 5vw, 30px);
            font-weight: bold;
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        .task-input-container {
            display: flex;
            gap: clamp(0.5rem, 1.5vw, 1rem);
            margin-bottom: clamp(1rem, 2vw, 2rem);
            align-items: stretch;
        }

        .task-input {
            flex: 1;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: clamp(5px, 1vw, 8px);
            padding: clamp(0.7rem, 2vw, 1rem) clamp(0.8rem, 2vw, 1.2rem);
            color: white;
            font-family: 'VT323', monospace;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            min-height: 45px;
        }

        .task-input:focus {
            border-color: rgba(255, 255, 255, 0.4);
            background: rgba(255, 255, 255, 0.12);
            outline: none;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        }

        .task-input::placeholder {
            color: #666666;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
        }

        .add-task-btn {
            font-family: 'VT323', monospace;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            background: transparent;
            border: 2px solid #888888;
            color: #888888;
            padding: 0 clamp(1rem, 2.5vw, 1.5rem);
            cursor: pointer;
            border-radius: clamp(5px, 1vw, 8px);
            min-width: clamp(60px, 15vw, 80px);
            min-height: 45px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .add-task-btn:hover {
            border-color: #ffffff;
            color: #ffffff;
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }

        .task-list {
            max-height: 400px;
            overflow-y: auto;
            padding-right: clamp(4px, 1vw, 8px);
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .task-list::-webkit-scrollbar {
            display: none;
        }

        .task-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: clamp(5px, 1vw, 8px);
            padding: clamp(0.7rem, 1.5vw, 1rem);
            margin-bottom: clamp(0.5rem, 1vw, 0.8rem);
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: slideInTask 0.6s ease-out forwards;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        @keyframes slideInTask {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .task-text {
            flex: 1;
            font-size: clamp(0.9rem, 2vw, 1.1rem);
            color: #cccccc;
            text-align: left;
            min-width: 150px;
        }

        .task-text-inner {
            position: relative;
            display: inline-block;
        }

        .task-text-inner::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            width: 0;
            height: 2px;
            background: #888888;
            transition: width 0.6s ease;
        }

        .task-text-inner.striking::after {
            width: 100%;
        }

        .task-controls {
            display: flex;
            gap: clamp(0.3rem, 1vw, 0.5rem);
        }

        .task-btn {
            background: none;
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #888;
            cursor: pointer;
            font-size: clamp(0.8rem, 1.8vw, 0.9rem);
            padding: clamp(0.3rem, 1vw, 0.4rem) clamp(0.5rem, 1.5vw, 0.8rem);
            border-radius: clamp(3px, 0.5vw, 4px);
            font-family: 'VT323', monospace;
            min-width: clamp(55px, 12vw, 65px);
        }

        .notification {
            position: fixed;
            top: clamp(10px, 2vw, 20px);
            right: clamp(10px, 2vw, 20px);
            background: rgba(255, 255, 255, 0.9);
            color: #000;
            padding: clamp(0.7rem, 2vw, 1rem) clamp(1rem, 3vw, 2rem);
            border-radius: clamp(5px, 1vw, 8px);
            font-family: 'VT323', monospace;
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            z-index: 1000;
            transform: translateX(300px);
            transition: transform 0.4s ease;
            max-width: 90vw;
        }

        .notification.show {
            transform: translateX(0);
        }

        .desktop-notice {
            position: fixed;
            bottom: clamp(10px, 2vw, 20px);
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.95);
            color: #000;
            padding: clamp(0.8rem, 2vw, 1rem) clamp(1.5rem, 4vw, 2.5rem);
            border-radius: clamp(8px, 1.5vw, 12px);
            font-family: 'VT323', monospace;
            font-size: clamp(0.95rem, 2.2vw, 1.1rem);
            z-index: 1001;
            display: none;
            text-align: center;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            border: 2px solid #333;
            max-width: 90vw;
            animation: slideUpNotice 0.5s ease-out;
        }

        .desktop-notice.show {
            display: block;
        }

        .desktop-notice-close {
            margin-left: clamp(0.5rem, 1.5vw, 1rem);
            background: #333;
            color: #fff;
            border: none;
            padding: clamp(0.3rem, 1vw, 0.4rem) clamp(0.6rem, 1.5vw, 0.8rem);
            border-radius: clamp(4px, 0.8vw, 6px);
            cursor: pointer;
            font-family: 'VT323', monospace;
            font-size: clamp(0.85rem, 2vw, 1rem);
            transition: all 0.3s ease;
        }

        .desktop-notice-close:hover {
            background: #555;
            transform: scale(1.05);
        }

        @keyframes slideUpNotice {
            from {
                opacity: 0;
                transform: translate(-50%, 20px);
            }

            to {
                opacity: 1;
                transform: translate(-50%, 0);
            }
        }

        @media (max-width: 480px) {
            .panels-container {
                flex-direction: column;
            }

            .settings-panel.open,
            .task-panel.open {
                width: 100%;
                transform: translateX(0);
            }

            .settings-panel {
                transform: translateY(-100%);
            }

            .settings-panel.open {
                transform: translateY(0);
            }

            .task-panel {
                transform: translateY(100%);
            }

            .task-panel.open {
                transform: translateY(0);
            }

            .control-btn {
                flex: 1 1 calc(50% - 0.5rem);
                max-width: none;
            }
        }

        @media (min-width: 481px) and (max-width: 768px) {
            .panels-container {
                flex-direction: column;
            }

            .settings-panel.open,
            .task-panel.open {
                width: 100%;
            }

            .control-btn {
                flex: 1 1 calc(33.333% - 0.67rem);
            }
        }

        @media (min-width: 769px) and (max-width: 1024px) {
            .timer-container {
                max-width: 95vw;
            }
        }

        @media (min-width: 1441px) {
            .timer-container {
                max-width: 900px;
            }
        }

        @media (min-width: 1920px) {
            .container {
                max-width: 1400px;
            }
        }

        @media (max-height: 600px) {
            body {
                justify-content: flex-start;
            }

            .progress-ring {
                width: clamp(150px, 40vw, 250px);
                height: clamp(150px, 40vw, 250px);
            }

            .timer-display {
                font-size: clamp(2.5rem, 12vw, 6rem);
            }
        }
    </style>
</head>

<body>
    <button class="fullscreen-btn" onclick="toggleFullscreen()" id="fullscreenBtn">⛶</button>

    <div class="dialog-backdrop" id="dialogBackdrop"></div>
    <div class="confirmation-dialog" id="confirmationDialog">
        <div class="dialog-title">Save Timer Settings?</div>
        <div class="dialog-message" id="dialogMessage"></div>
        <div class="dialog-buttons">
            <button class="dialog-btn confirm" onclick="confirmTimerChange()">YES, SAVE & RESET</button>
            <button class="dialog-btn cancel" onclick="cancelTimerChange()">CANCEL</button>
        </div>
    </div>

    <div class="container" id="mainContainer">
        <h1 class="main-title">POMODORO FOCUS</h1>

        <div class="quote-container">
            <div class="stoic-quote" id="stoicQuote">"Control the controllable."</div>
        </div>

        <div class="timer-container">
            <div class="progress-ring" id="progressRing">
                <div class="session-counter-overlay" id="sessionCounter">
                    <div class="session-label">Session:</div>
                    <div class="session-fraction" id="sessionFraction">1/2</div>
                </div>
            </div>

            <div class="timer-display" id="timerDisplay">25:00</div>
            <div class="session-status" id="sessionStatus">FOCUS TIME</div>

            <div class="controls">
                <button class="control-btn" id="startBtn" onclick="startTimer()">START</button>
                <button class="control-btn" id="pauseBtn" onclick="pauseTimer()">PAUSE</button>
                <button class="control-btn" id="resetBtn" onclick="resetTimer()">RESET</button>
                <button class="control-btn" id="settingsBtn" onclick="toggleSettings()">SETTINGS</button>
                <button class="control-btn" id="tasksBtn" onclick="toggleTasks()">TASKS</button>
            </div>
        </div>

        <div class="panels-container" id="panelsContainer">
            <div class="settings-panel" id="settingsPanel">
                <div class="timer-warning" id="timerWarning">
                    Clock is still running! Pause the timer before changing settings.
                </div>

                <div class="settings-group">
                    <div class="settings-header">
                        <h3>Timer Settings</h3>
                        <button class="save-settings-btn" id="saveSettingsBtn"
                            onclick="saveTimerSettings()">SAVE</button>
                    </div>
                    <div class="setting-row">
                        <label>Focus Time (minutes):</label>
                        <input type="number" class="setting-input" id="focusTime" value="25" min="1" max="60"
                            oninput="handleTimerInput()">
                    </div>
                    <div class="setting-row">
                        <label>Short Break (minutes):</label>
                        <input type="number" class="setting-input" id="shortBreak" value="5" min="1" max="30"
                            oninput="handleTimerInput()">
                    </div>
                    <div class="setting-row">
                        <label>Long Break (minutes):</label>
                        <input type="number" class="setting-input" id="longBreak" value="15" min="10" max="60"
                            oninput="handleTimerInput()">
                    </div>
                    <div class="setting-row">
                        <label>Total Sessions:</label>
                        <input type="number" class="setting-input" id="totalSessions" value="4" min="2" max="10"
                            oninput="handleSessionInput()">
                    </div>
                    <div class="setting-row">
                        <label>Sessions Until Long Break:</label>
                        <input type="number" class="setting-input" id="sessionsUntilLongBreak" value="4" min="2"
                            max="8">
                    </div>
                </div>

                <div class="settings-group">
                    <h3>Audio Settings</h3>
                    <div class="setting-row">
                        <label>Notification Sound:</label>
                        <select class="setting-select" id="notificationSound" onchange="previewSound()">
                            <option value="bell">Bell</option>
                            <option value="chime">Chime</option>
                            <option value="ding">Ding</option>
                            <option value="beep">Beep</option>
                            <option value="none">None</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label>Volume:</label>
                        <div class="volume-container">
                            <input type="range" class="volume-slider" id="volume" min="0" max="100" value="50"
                                oninput="updateVolumeDisplay()" onchange="previewSound()">
                            <span class="volume-value" id="volumeValue">50</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="task-panel" id="taskPanel">
                <h3>Focus Tasks</h3>
                <div class="task-input-container">
                    <input type="text" class="task-input" id="taskInput" placeholder="What are you focusing on?"
                        maxlength="100">
                    <button class="add-task-btn" onclick="addTask()">ADD</button>
                </div>
                <div class="task-list" id="taskList"></div>
            </div>
        </div>
    </div>

    <div class="notification" id="notification">Session completed!</div>

    <div class="desktop-notice" id="desktopNotice">
        ⚠️ Works best on desktop screens
        <button class="desktop-notice-close" onclick="closeDesktopNotice()">OK</button>
    </div>

    <script>
        let timer, timeLeft = 25 * 60, isRunning = false, currentSession = 1, isBreak = false;
        let tasks = [], isFullscreen = false, settingsOpen = false, tasksOpen = false;
        let originalTimerValues = {};
        let settingsChanged = false;
        let countdownInterval;
        let isCountingDown = false;

        const stoicQuotes = [
            "Control the controllable.",
            "Focus is freedom.",
            "Discipline equals peace.",
            "Start now, not later.",
            "Action over anxiety.",
            "Progress, not perfection.",
            "Suffer the discipline or suffer regret.",
            "The obstacle is the way.",
            "Character over comfort.",
            "Show up every day.",
            "Master your morning, master your life.",
            "Silence the excuses.",
            "Consistency is key.",
            "Hard work in silence.",
            "Build, don't broadcast.",
            "Present moment, full focus.",
            "Execute without emotion.",
            "Your future self is watching.",
            "No days off from growth.",
            "Virtue through action.",
            "Mind over comfort.",
            "Embrace the grind.",
            "Excellence is a habit.",
            "Stay hungry, stay disciplined.",
            "Focus on what matters.",
            "Less talk, more work.",
            "Earn your rest.",
            "Detach from outcomes.",
            "Process over results.",
            "Build in the dark.",
            "Patience is power.",
            "Trust the process.",
            "Stay calm, stay focused.",
            "Make today count.",
            "Rise above distractions.",
            "Strength through struggle.",
            "Momentum builds empires.",
            "Every rep matters.",
            "Silence is strength.",
            "Work speaks louder.",
            "Master yourself first.",
            "Compound your efforts.",
            "Small wins daily.",
            "Stay in your lane.",
            "Control your response.",
            "Focus fuels success.",
            "Chase excellence, not applause.",
            "Discipline breeds freedom.",
            "Outwork your doubts.",
            "Quality over quantity.",
            "Build unstoppable momentum.",
            "Earn your confidence.",
            "Stay focused, stay fierce.",
            "Execute the plan.",
            "Perseverance over passion.",
            "Sharpen your mind.",
            "Actions define you.",
            "Stay committed, not interested.",
            "Silence breeds focus.",
            "Grind in obscurity.",
            "Build your legacy daily.",
            "Focus on the fundamentals.",
            "Master the mundane.",
            "Consistency beats talent.",
            "Stay locked in.",
            "Progress demands patience.",
            "Work when no one's watching.",
            "Zero excuses, pure execution.",
            "Mind the gap between thoughts and action.",
            "Stay present, stay powerful.",
            "Build character through challenge.",
            "Discipline is destiny.",
            "Make discomfort comfortable.",
            "Elevate through effort.",
            "Focus until it's finished.",
            "Embrace voluntary hardship.",
            "Your mindset matters most.",
            "Stay steady, stay strong.",
            "Results require resilience.",
            "Cultivate calm focus.",
            "Master your reactions.",
            "Build through resistance.",
            "Stay sharp, stay focused.",
            "Practice over preaching.",
            "Daily discipline wins.",
            "Execute without hesitation.",
            "Focus is everything.",
            "Stay in motion.",
            "Silence the noise.",
            "Build better habits.",
            "Stay committed to the craft.",
            "Focus on your lane.",
            "Make every moment matter.",
            "Build momentum through motion.",
            "Stay disciplined, stay dangerous.",
            "Control your attention.",
            "Execute with precision.",
            "Stay focused on what you can control.",
            "Build through consistency.",
            "Lock in, level up."
        ];

        function getNextQuote() {
            const currentIndex = parseInt(localStorage.getItem('quoteIndex') || '0');
            const quote = stoicQuotes[currentIndex];
            const nextIndex = (currentIndex + 1) % stoicQuotes.length;
            localStorage.setItem('quoteIndex', nextIndex.toString());
            return `"${quote}"`;
        }

        function displayQuote() {
            document.getElementById('stoicQuote').textContent = getNextQuote();
        }

        function createStars() {
            const width = window.innerWidth;
            const starCount = width > 1200 ? 150 : width > 768 ? 100 : 60;
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'pixel';
                star.style.left = Math.random() * 100 + '%';
                star.style.top = Math.random() * 100 + '%';
                star.style.animationDelay = Math.random() * 3 + 's';
                document.body.appendChild(star);
            }
        }

        function toggleFullscreen() {
            const elem = document.documentElement;

            if (!document.fullscreenElement && !document.webkitFullscreenElement &&
                !document.mozFullScreenElement && !document.msFullscreenElement) {
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) {
                    elem.webkitRequestFullscreen();
                } else if (elem.mozRequestFullScreen) {
                    elem.mozRequestFullScreen();
                } else if (elem.msRequestFullscreen) {
                    elem.msRequestFullscreen();
                }
            } else {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) {
                    document.webkitExitFullscreen();
                } else if (document.mozCancelFullScreen) {
                    document.mozCancelFullScreen();
                } else if (document.msExitFullscreen) {
                    document.msExitFullscreen();
                }
            }
        }

        function updateFullscreenButton() {
            const btn = document.getElementById('fullscreenBtn');
            if (document.fullscreenElement || document.webkitFullscreenElement ||
                document.mozFullScreenElement || document.msFullscreenElement) {
                btn.textContent = '✕';
            } else {
                btn.textContent = '⛶';
            }
        }

        function checkDeviceAndShowNotice() {
            const isMobileOrTablet = window.innerWidth < 1024;
            const noticeShown = localStorage.getItem('desktopNoticeShown');

            if (isMobileOrTablet && !noticeShown) {
                setTimeout(() => {
                    document.getElementById('desktopNotice').classList.add('show');
                }, 1500);
            }
        }

        function closeDesktopNotice() {
            document.getElementById('desktopNotice').classList.remove('show');
            localStorage.setItem('desktopNoticeShown', 'true');
        }

        function toggleSettings() {
            const panel = document.getElementById('settingsPanel');
            const container = document.getElementById('panelsContainer');
            const btn = document.getElementById('settingsBtn');
            settingsOpen = !settingsOpen;

            if (settingsOpen) {
                container.classList.add('active');
                panel.classList.add('open');
                btn.classList.add('panel-active');
                storeOriginalValues();

                setTimeout(() => {
                    container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 100);
            } else {
                panel.classList.remove('open');
                btn.classList.remove('panel-active');
                document.getElementById('saveSettingsBtn').classList.remove('show');
                settingsChanged = false;

                if (!tasksOpen) {
                    const timerContainer = document.querySelector('.timer-container');
                    timerContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    setTimeout(() => {
                        container.classList.remove('active');
                    }, 800);
                }
            }
        }

        function toggleTasks() {
            const panel = document.getElementById('taskPanel');
            const container = document.getElementById('panelsContainer');
            const btn = document.getElementById('tasksBtn');
            tasksOpen = !tasksOpen;

            if (tasksOpen) {
                container.classList.add('active');
                panel.classList.add('open');
                btn.classList.add('panel-active');

                setTimeout(() => {
                    container.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                }, 100);
            } else {
                panel.classList.remove('open');
                btn.classList.remove('panel-active');

                if (!settingsOpen) {
                    const timerContainer = document.querySelector('.timer-container');
                    timerContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });

                    setTimeout(() => {
                        container.classList.remove('active');
                    }, 800);
                }
            }
        }

        function handleTimerInput() {
            if (!settingsChanged) {
                document.getElementById('saveSettingsBtn').classList.add('show');
                settingsChanged = true;
            }
        }

        function handleSessionInput() {
            updateSessionCounter();
        }

        function saveTimerSettings() {
            const warning = document.getElementById('timerWarning');
            if (isRunning) {
                warning.classList.add('show');
                setTimeout(() => warning.classList.remove('show'), 3000);
                return;
            }
            warning.classList.remove('show');
            showConfirmationDialog();
        }

        function storeOriginalValues() {
            originalTimerValues = {
                focus: parseInt(document.getElementById('focusTime').value),
                shortBreak: parseInt(document.getElementById('shortBreak').value),
                longBreak: parseInt(document.getElementById('longBreak').value)
            };
        }

        function showConfirmationDialog() {
            const dialog = document.getElementById('confirmationDialog');
            const backdrop = document.getElementById('dialogBackdrop');
            document.getElementById('dialogMessage').innerHTML = `Applying new timer settings will reset the current timer.<br>Current progress will be lost.`;
            dialog.classList.add('show');
            backdrop.classList.add('show');
        }

        function confirmTimerChange() {
            storeOriginalValues();
            resetTimerWithNewSettings();
            closeConfirmationDialog();
            document.getElementById('saveSettingsBtn').classList.remove('show');
            settingsChanged = false;
        }

        function cancelTimerChange() {
            document.getElementById('focusTime').value = originalTimerValues.focus;
            document.getElementById('shortBreak').value = originalTimerValues.shortBreak;
            document.getElementById('longBreak').value = originalTimerValues.longBreak;
            closeConfirmationDialog();
            document.getElementById('saveSettingsBtn').classList.remove('show');
            settingsChanged = false;
        }

        function closeConfirmationDialog() {
            document.getElementById('confirmationDialog').classList.remove('show');
            document.getElementById('dialogBackdrop').classList.remove('show');
        }

        function resetTimerWithNewSettings() {
            pauseTimer();
            if (!isBreak) {
                timeLeft = parseInt(document.getElementById('focusTime').value) * 60;
            } else {
                const sessionsUntilLongBreak = parseInt(document.getElementById('sessionsUntilLongBreak').value);
                const isLongBreak = currentSession % sessionsUntilLongBreak === 0;
                timeLeft = isLongBreak ? parseInt(document.getElementById('longBreak').value) * 60 : parseInt(document.getElementById('shortBreak').value) * 60;
            }
            updateDisplay();
            showNotification('Timer settings saved!');
        }

        function updateVolumeDisplay() {
            document.getElementById('volumeValue').textContent = document.getElementById('volume').value;
        }

        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            const remainingSeconds = seconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${remainingSeconds.toString().padStart(2, '0')}`;
        }

        function updateDisplay() {
            document.getElementById('timerDisplay').textContent = formatTime(timeLeft);
            updateProgress();
            updateSessionCounter();
        }

        function updateProgress() {
            const sessionsUntilLongBreak = parseInt(document.getElementById('sessionsUntilLongBreak').value);
            const totalTime = isBreak ? (currentSession % sessionsUntilLongBreak === 0 ? parseInt(document.getElementById('longBreak').value) : parseInt(document.getElementById('shortBreak').value)) * 60 : parseInt(document.getElementById('focusTime').value) * 60;
            const progress = ((totalTime - timeLeft) / totalTime) * 100;
            document.getElementById('progressRing').style.background = `conic-gradient(#ffffff ${progress * 3.6}deg, #333333 0deg)`;
        }

        function updateSessionCounter() {
            const totalSessions = parseInt(document.getElementById('totalSessions').value);
            document.getElementById('sessionFraction').textContent = `${Math.ceil(currentSession / 2)}/${totalSessions}`;
        }

        function startCountdown(callback) {
            isCountingDown = true;
            let count = 3;
            const display = document.getElementById('timerDisplay');
            const originalText = display.textContent;

            display.classList.add('countdown-display');

            function updateCountdown() {
                if (count > 0) {
                    display.textContent = count;
                    playBeep();
                    count--;
                    countdownInterval = setTimeout(updateCountdown, 1000);
                } else {
                    display.classList.remove('countdown-display');
                    display.textContent = originalText;
                    display.classList.add('timer-fade-in');
                    setTimeout(() => display.classList.remove('timer-fade-in'), 500);
                    isCountingDown = false;
                    callback();
                }
            }

            updateCountdown();
        }

        function playBeep() {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            oscillator.frequency.setValueAtTime(600, audioContext.currentTime);
            gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.1);
        }

        function startTimer() {
            if (!isRunning && !isCountingDown) {
                startCountdown(() => {
                    isRunning = true;
                    document.getElementById('startBtn').classList.add('active');
                    updateSessionStatus();
                    timer = setInterval(() => {
                        timeLeft--;
                        updateDisplay();
                        if (timeLeft <= 0) completeSession();
                    }, 1000);
                });
            }
        }

        function pauseTimer() {
            if (isRunning) {
                isRunning = false;
                clearInterval(timer);
                document.getElementById('startBtn').classList.remove('active');
                updateSessionStatus();
            }
            if (isCountingDown) {
                clearTimeout(countdownInterval);
                isCountingDown = false;
                document.getElementById('timerDisplay').classList.remove('countdown-display');
                updateDisplay();
            }
        }

        function resetTimer() {
            pauseTimer();
            const sessionsUntilLongBreak = parseInt(document.getElementById('sessionsUntilLongBreak').value);
            timeLeft = isBreak ? (currentSession % sessionsUntilLongBreak === 0 ? parseInt(document.getElementById('longBreak').value) : parseInt(document.getElementById('shortBreak').value)) * 60 : parseInt(document.getElementById('focusTime').value) * 60;
            updateDisplay();
            document.getElementById('startBtn').classList.remove('active');
        }

        function completeSession() {
            pauseTimer();
            playNotification();
            showNotification(isBreak ? 'Break completed!' : 'Focus session completed!');
            const sessionsUntilLongBreak = parseInt(document.getElementById('sessionsUntilLongBreak').value);
            if (!isBreak) {
                if (currentSession % sessionsUntilLongBreak === 0) startBreak(true);
                else startBreak(false);
                currentSession++;
            } else startFocus();
            updateSessionStatus();
        }

        function startFocus() {
            isBreak = false;
            timeLeft = parseInt(document.getElementById('focusTime').value) * 60;
            updateSessionStatus();
            updateDisplay();
        }

        function startBreak(isLong) {
            isBreak = true;
            timeLeft = isLong ? parseInt(document.getElementById('longBreak').value) * 60 : parseInt(document.getElementById('shortBreak').value) * 60;
            updateSessionStatus();
            updateDisplay();
        }

        function updateSessionStatus() {
            const statusElement = document.getElementById('sessionStatus');
            statusElement.classList.remove('focus-glow', 'break-glow', 'running');
            if (!isBreak) {
                statusElement.textContent = 'FOCUS TIME';
                statusElement.classList.add('focus-glow');
                if (isRunning) statusElement.classList.add('running');
            } else {
                const sessionsUntilLongBreak = parseInt(document.getElementById('sessionsUntilLongBreak').value);
                const isLongBreak = currentSession % sessionsUntilLongBreak === 0;
                statusElement.textContent = isLongBreak ? 'LONG BREAK' : 'SHORT BREAK';
                statusElement.classList.add('break-glow');
                if (isRunning) statusElement.classList.add('running');
            }
        }

        function previewSound() {
            const sound = document.getElementById('notificationSound').value;
            const volume = document.getElementById('volume').value / 100;
            if (sound !== 'none') playSound(sound, volume);
        }

        function playSound(soundType, volume) {
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            const sounds = { bell: [800, 1], chime: [600, 0.8], ding: [1000, 0.6], beep: [400, 0.3] };
            const [frequency, duration] = sounds[soundType] || [800, 1];
            oscillator.frequency.setValueAtTime(frequency, audioContext.currentTime);
            gainNode.gain.setValueAtTime(volume * 0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + duration);
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + duration);
        }

        function playNotification() {
            const sound = document.getElementById('notificationSound').value;
            const volume = document.getElementById('volume').value / 100;
            if (sound !== 'none') playSound(sound, volume);
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            setTimeout(() => notification.classList.remove('show'), 3000);
        }

        function addTask() {
            const taskInput = document.getElementById('taskInput');
            const taskText = taskInput.value.trim();
            if (taskText) {
                tasks.push({ id: Date.now(), text: taskText, completed: false });
                taskInput.value = '';
                renderTasks();
            }
        }

        function renderTasks() {
            const taskList = document.getElementById('taskList');
            taskList.innerHTML = '';
            tasks.forEach((task, index) => {
                const taskElement = document.createElement('div');
                taskElement.className = 'task-item';
                taskElement.style.animationDelay = `${index * 0.15}s`;
                taskElement.innerHTML = `
                    <div class="task-text ${task.completed ? 'completed' : ''}" id="taskText-${task.id}">
                        <span class="task-text-inner ${task.completed ? 'striking' : ''}" id="taskTextInner-${task.id}">${task.text}</span>
                    </div>
                    <div class="task-controls">
                        <button class="task-btn" onclick="toggleTask(${task.id})" id="toggleBtn-${task.id}">
                            ${task.completed ? 'UNDO' : 'DONE'}
                        </button>
                        <button class="task-btn" onclick="deleteTask(${task.id})">DELETE</button>
                    </div>
                `;
                taskList.appendChild(taskElement);
            });
        }

        function toggleTask(taskId) {
            const task = tasks.find(t => t.id === taskId);
            const taskTextInner = document.getElementById(`taskTextInner-${taskId}`);
            const toggleBtn = document.getElementById(`toggleBtn-${taskId}`);
            if (task) {
                if (!task.completed) {
                    taskTextInner.classList.add('striking');
                    setTimeout(() => {
                        toggleBtn.textContent = 'UNDO';
                        task.completed = true;
                    }, 300);
                } else {
                    taskTextInner.classList.remove('striking');
                    setTimeout(() => {
                        toggleBtn.textContent = 'DONE';
                        task.completed = false;
                    }, 100);
                }
            }
        }

        function deleteTask(taskId) {
            tasks = tasks.filter(t => t.id !== taskId);
            renderTasks();
        }

        document.getElementById('taskInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') addTask();
        });

        document.addEventListener('keydown', (e) => {
            if (e.code === 'Space') {
                e.preventDefault();
                isRunning ? pauseTimer() : startTimer();
            }
        });

        document.addEventListener('fullscreenchange', updateFullscreenButton);
        document.addEventListener('webkitfullscreenchange', updateFullscreenButton);
        document.addEventListener('mozfullscreenchange', updateFullscreenButton);
        document.addEventListener('MSFullscreenChange', updateFullscreenButton);

        window.addEventListener('beforeunload', function () {
            window.scrollTo(0, 0);
        });

        window.addEventListener('load', function () {
            if ('scrollRestoration' in history) {
                history.scrollRestoration = 'manual';
            }
            window.scrollTo(0, 0);
            displayQuote();
            createStars();
            updateDisplay();
            updateSessionStatus();
            storeOriginalValues();
            updateVolumeDisplay();
            checkDeviceAndShowNotice();
        });
    </script>
    <!-- Analytics Tracking -->
<script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
  import { getDatabase, ref, push } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js';

  const firebaseConfig = {
    apiKey: "AIzaSyBqj11JuvxpKFd0I6VD3vzO0Ql148uFc_U",
    authDomain: "glyphthoughts-analytics.firebaseapp.com",
    databaseURL: "https://glyphthoughts-analytics-default-rtdb.asia-southeast1.firebasedatabase.app",
    projectId: "glyphthoughts-analytics",
    storageBucket: "glyphthoughts-analytics.firebasestorage.app",
    messagingSenderId: "803370891175",
    appId: "1:803370891175:web:6139f3003ef2ea96e56882"
  };

  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);

  const projectName = 'tools/Pomodoro';
  
  const visitsRef = ref(database, 'visits/' + projectName.replace('/', '-'));
  
  push(visitsRef, {
    timestamp: Date.now(),
    page: window.location.pathname,
    referrer: document.referrer || 'direct',
    userAgent: navigator.userAgent,
    screenWidth: window.screen.width,
    screenHeight: window.screen.height,
    category: projectName.split('/')[0],
    project: projectName.split('/')[1]
  });
</script>
</body>

</html>
